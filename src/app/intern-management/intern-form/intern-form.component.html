<div class="form-container">
  <div class="form-header">
    <h2>Yeni Stajyer Ekle</h2>
    <button class="update-button" type="button" (click)="openSelectIntern()">
      Stajyer SeÃ§ / GÃ¼ncelle
    </button>
  </div>
  <div *ngIf="showSelectDialog" class="update-dialog">
    <h3>GÃ¼ncellenecek Stajyeri SeÃ§</h3>
    <ul>
      <li *ngFor="let intern of allInterns" (click)="selectInternToUpdate(intern)">
        {{ intern.first_name }} {{ intern.last_name }} - {{ intern.school }}
      </li>
    </ul>
    <button mat-button (click)="showSelectDialog = false">Kapat</button>
  </div>
  <form #internForm="ngForm" (submit)="onFormSubmit($event)" novalidate>
    <div class="form-group">
      <label class="field-label">Ad *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="firstName" [(ngModel)]="intern.first_name" #firstName="ngModel" required />
      </mat-form-field>
      <div *ngIf="firstName.invalid && firstName.touched" class="error-msg">Ad zorunludur.</div>
    </div>
    <div class="form-group">
      <label class="field-label">Soyad *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="lastName" [(ngModel)]="intern.last_name" #lastName="ngModel" required />
      </mat-form-field>
      <div *ngIf="lastName.invalid && lastName.touched" class="error-msg">Soyad zorunludur.</div>
    </div>
    <div class="form-group">
      <label class="field-label">Okul *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="school" [(ngModel)]="intern.school" #school="ngModel" required />
      </mat-form-field>
      <div *ngIf="school.invalid && school.touched" class="error-msg">Okul zorunludur.</div>
    </div>
    <div class="form-group">
      <label class="field-label">BÃ¶lÃ¼m</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="department" [(ngModel)]="intern.department" />
      </mat-form-field>
    </div>
   <div class="form-group">
  <label class="field-label">Durum *</label>
  <mat-form-field appearance="fill" class="full-width">
    <mat-select name="status" [(ngModel)]="intern.status" #status="ngModel" required>
      <mat-option value="aktif">Aktif</mat-option>
      <mat-option value="pasif">Pasif</mat-option>
      <mat-option value="tamamlandÄ±">TamamlandÄ±</mat-option>
    </mat-select>
  </mat-form-field>
  <div *ngIf="status.invalid && status.touched" class="error-msg">
    Durum seÃ§imi zorunludur.  </div>
</div>
    <div class="form-group">
      <label class="field-label">Telefon *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="contact" [(ngModel)]="intern.contact" #contact="ngModel" required pattern="^[0-9]+$" />
      </mat-form-field>
      <div *ngIf="contact.invalid && contact.touched" class="error-msg">Telefon numarasÄ± sadece rakamlardan oluÅŸmalÄ±dÄ±r.</div>
    </div>
    <div class="form-group">
      <label class="field-label">E-posta *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput type="email" name="email" [(ngModel)]="intern.email" #email="ngModel" required email />
      </mat-form-field>
      <div *ngIf="email.invalid && email.touched" class="error-msg">GeÃ§erli bir e-posta giriniz.</div>
    </div>
    <div class="date-row">
      <mat-form-field appearance="fill" floatLabel="always" class="date-field">
        <label class="field-label">BaÅŸlangÄ±Ã§ Tarihi *</label>
        <input matInput [matDatepicker]="pickerStart" name="startDate" [(ngModel)]="intern.start_date" #startDate="ngModel" required />
        <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
        <mat-datepicker #pickerStart></mat-datepicker>
        <div *ngIf="startDate.invalid && startDate.touched" class="error-msg">BaÅŸlangÄ±Ã§ tarihi zorunludur.</div>
      </mat-form-field>
      <mat-form-field appearance="fill" floatLabel="always" class="date-field">
        <label class="field-label">BitiÅŸ Tarihi</label>
        <input matInput [matDatepicker]="pickerEnd" name="endDate" [(ngModel)]="intern.end_date" />
        <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
        <mat-datepicker #pickerEnd></mat-datepicker>
      </mat-form-field>
    </div>
<!-- FOTOÄžRAF -->
<div class="form-group">
  <label class="field-label">FotoÄŸraf YÃ¼kle</label>
  <div class="file-select-wrapper">
    <button mat-raised-button color="accent" type="button" (click)="openPhotoWithTauri()">
      FotoÄŸraf SeÃ§
    </button>
    <span *ngIf="intern.photoFile || intern.photo_name" class="file-badge"
          [title]="(intern.photoFile?.name || intern.photo_name) || ''">
      {{ intern.photoFile?.name || intern.photo_name }}
    </span>
    <input #photoInput type="file"
           (change)="onPhotoInputChange($event)"
           [attr.accept]="acceptImg.join(',')"
           style="display:none" />
  </div>
</div>

<!-- CV -->
<div class="form-group">
  <label class="field-label">CV YÃ¼kle (PDF, DOC, DOCX)</label>
  <div class="file-select-wrapper">
    <button mat-raised-button color="accent" type="button" (click)="openCvWithTauri()">
      CV SeÃ§
    </button>
    <span *ngIf="intern.cvFile || intern.cv_name" class="file-badge" [title]="(intern.cvFile?.name || intern.cv_name) || ''">
      ðŸ“„ {{ intern.cvFile?.name || intern.cv_name }}
    </span>
    <input #cvInput type="file"
           (change)="onCvInputChange($event)"
           [attr.accept]="acceptCv.join(',')"
           style="display:none" />
  </div>
</div>

 

   <div class="button-group">
  <button mat-raised-button color="primary" type="button" (click)="onSubmitClick()">
    {{ isUpdateMode ? 'GÃ¼ncelle' : 'Ekle' }}
  </button>
  </div>
  </form>
</div>
