<div class="form-container">
  <div class="form-header">
    <h2>{{ 'internForm.title' | translate }}</h2>
    <button class="update-button" type="button" (click)="openSelectIntern()">
      {{ 'internForm.selectOrUpdate' | translate }}
    </button>
  </div>
  <div *ngIf="showSelectDialog" class="update-dialog">
    <h3>{{ 'internForm.selectToUpdate' | translate }}</h3>
    <ul>
      <li *ngFor="let intern of allInterns" (click)="selectInternToUpdate(intern)">
        {{ intern.first_name }} {{ intern.last_name }} - {{ intern.school }}
      </li>
    </ul>
    <button mat-button (click)="showSelectDialog = false">{{ 'common.close' | translate }}</button>
  </div>
  <form #internForm="ngForm" (submit)="onFormSubmit($event)" novalidate>
    <div class="form-group">
      <label class="field-label">{{ 'internForm.firstName' | translate }} *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="firstName" [(ngModel)]="intern.first_name" #firstName="ngModel" required />
      </mat-form-field>
      <div *ngIf="firstName.invalid && firstName.touched" class="error-msg">{{ 'internForm.errors.firstNameRequired' | translate }}</div>
    </div>
    <div class="form-group">
      <label class="field-label">{{ 'internForm.lastName' | translate }} *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="lastName" [(ngModel)]="intern.last_name" #lastName="ngModel" required />
      </mat-form-field>
      <div *ngIf="lastName.invalid && lastName.touched" class="error-msg">{{ 'internForm.errors.lastNameRequired' | translate }}</div>
    </div>
    <div class="form-group">
      <label class="field-label">{{ 'internForm.school' | translate }} *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="school" [(ngModel)]="intern.school" #school="ngModel" required />
      </mat-form-field>
      <div *ngIf="school.invalid && school.touched" class="error-msg">{{ 'internForm.errors.schoolRequired' | translate }}</div>
    </div>
    <div class="form-group">
      <label class="field-label">{{ 'internForm.department' | translate }}</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="department" [(ngModel)]="intern.department" />
      </mat-form-field>
    </div>
   <div class="form-group">
  <label class="field-label">{{ 'internForm.status' | translate }} *</label>
  <mat-form-field appearance="fill" class="full-width">
    <mat-select name="status" [(ngModel)]="intern.status" #status="ngModel" required>
      <mat-option value="aktif">{{ 'internForm.status_active' | translate }}</mat-option>
      <mat-option value="pasif">{{ 'internForm.status_inactive' | translate }}</mat-option>
      <mat-option value="tamamlandÄ±">{{ 'internForm.status_completed' | translate }}</mat-option>
    </mat-select>
  </mat-form-field>
  <div *ngIf="status.invalid && status.touched" class="error-msg">
    {{ 'internForm.errors.statusRequired' | translate }}  </div>
</div>
    <div class="form-group">
      <label class="field-label">{{ 'internForm.phone' | translate }} *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="contact" [(ngModel)]="intern.contact" #contact="ngModel" required pattern="^[0-9]+$" />
      </mat-form-field>
      <div *ngIf="contact.invalid && contact.touched" class="error-msg">{{ 'internForm.errors.phoneDigits' | translate }}</div>
    </div>
    <div class="form-group">
      <label class="field-label">{{ 'internForm.email' | translate }} *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput type="email" name="email" [(ngModel)]="intern.email" #email="ngModel" required email />
      </mat-form-field>
      <div *ngIf="email.invalid && email.touched" class="error-msg">{{ 'internForm.errors.emailValid' | translate }}</div>
    </div>
    <div class="date-row">
      <mat-form-field appearance="fill" floatLabel="always" class="date-field">
        <label class="field-label">{{ 'internForm.startDate' | translate }} *</label>
        <input matInput [matDatepicker]="pickerStart" name="startDate" [(ngModel)]="intern.start_date" #startDate="ngModel" required />
        <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
        <mat-datepicker #pickerStart></mat-datepicker>
        <div *ngIf="startDate.invalid && startDate.touched" class="error-msg">{{ 'internForm.errors.startDateRequired' | translate }}</div>
      </mat-form-field>
      <mat-form-field appearance="fill" floatLabel="always" class="date-field">
        <label class="field-label">{{ 'internForm.endDate' | translate }}</label>
        <input matInput [matDatepicker]="pickerEnd" name="endDate" [(ngModel)]="intern.end_date" />
        <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
        <mat-datepicker #pickerEnd></mat-datepicker>
      </mat-form-field>
    </div>
<!-- FOTOÄžRAF -->
<div class="form-group">
  <label class="field-label">{{ 'internForm.photoUpload' | translate }}</label>
  <div class="file-select-wrapper">
    <button mat-raised-button color="accent" type="button" (click)="openPhotoWithTauri()">
      {{ 'internForm.selectPhoto' | translate }}
    </button>
    <span *ngIf="intern.photoFile || intern.photo_name" class="file-badge"
          [title]="(intern.photoFile?.name || intern.photo_name) || ''">
      {{ intern.photoFile?.name || intern.photo_name }}
    </span>
    <input #photoInput type="file"
           (change)="onPhotoInputChange($event)"
           [attr.accept]="acceptImg.join(',')"
           style="display:none" />
  </div>
</div>

<!-- CV -->
<div class="form-group">
  <label class="field-label">{{ 'internForm.cvUpload' | translate }}</label>
  <div class="file-select-wrapper">
    <button mat-raised-button color="accent" type="button" (click)="openCvWithTauri()">
      {{ 'internForm.selectCv' | translate }}
    </button>
    <span *ngIf="intern.cvFile || intern.cv_name" class="file-badge" [title]="(intern.cvFile?.name || intern.cv_name) || ''">
      ðŸ“„ {{ intern.cvFile?.name || intern.cv_name }}
    </span>
    <input #cvInput type="file"
           (change)="onCvInputChange($event)"
           [attr.accept]="acceptCv.join(',')"
           style="display:none" />
  </div>
</div>

 

   <div class="button-group">
  <button mat-raised-button color="primary" type="button" (click)="onSubmitClick()">
    {{ (isUpdateMode ? 'internForm.update' : 'internForm.add') | translate }}
  </button>
  </div>
  </form>
</div>
