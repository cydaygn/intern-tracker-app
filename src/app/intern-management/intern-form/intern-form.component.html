<div class="form-container">
  <h2>Yeni Stajyer Ekle</h2>

  <button mat-button (click)="goBack()" aria-label="Geri">
    <mat-icon>arrow_back</mat-icon>
    Geri
  </button>

  
  <form #internForm="ngForm" (submit)="onFormSubmit($event)" novalidate>
    <div class="form-group">
      <label class="field-label">Ad *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="firstName" [(ngModel)]="intern.first_name" #firstName="ngModel" required />
      </mat-form-field>
      <div *ngIf="firstName.invalid && firstName.touched" class="error-msg">Ad zorunludur.</div>
    </div>

    <div class="form-group">
      <label class="field-label">Soyad *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="lastName" [(ngModel)]="intern.last_name" #lastName="ngModel" required />
      </mat-form-field>
      <div *ngIf="lastName.invalid && lastName.touched" class="error-msg">Soyad zorunludur.</div>
    </div>

    <div class="form-group">
      <label class="field-label">Okul *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="school" [(ngModel)]="intern.school" #school="ngModel" required />
      </mat-form-field>
      <div *ngIf="school.invalid && school.touched" class="error-msg">Okul zorunludur.</div>
    </div>

    <div class="form-group">
      <label class="field-label">BÃ¶lÃ¼m</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="department" [(ngModel)]="intern.department" />
      </mat-form-field>
    </div>

    <div class="form-group">
      <label class="field-label">Durum *</label>
      <select name="status" [(ngModel)]="intern.status" #status="ngModel" required>
        <option value="aktif">Aktif</option>
        <option value="pasif">Pasif</option>
        <option value="tamamlandÄ±">TamamlandÄ±</option>
      </select>
      <div *ngIf="status.invalid && status.touched" class="error-msg">Durum seÃ§imi zorunludur.</div>
    </div>

    <div class="form-group">
      <label class="field-label">Telefon *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput name="contact" [(ngModel)]="intern.contact" #contact="ngModel" required pattern="^[0-9]+$" />
      </mat-form-field>
      <div *ngIf="contact.invalid && contact.touched" class="error-msg">Telefon numarasÄ± sadece rakamlardan oluÅŸmalÄ±dÄ±r.</div>
    </div>

    <div class="form-group">
      <label class="field-label">E-posta *</label>
      <mat-form-field appearance="fill" class="full-width">
        <input matInput type="email" name="email" [(ngModel)]="intern.email" #email="ngModel" required email />
      </mat-form-field>
      <div *ngIf="email.invalid && email.touched" class="error-msg">GeÃ§erli bir e-posta giriniz.</div>
    </div>

    <div class="date-row">
      <mat-form-field appearance="fill" floatLabel="always" class="date-field">
        <label class="field-label">BaÅŸlangÄ±Ã§ Tarihi *</label>
        <input matInput [matDatepicker]="pickerStart" name="startDate" [(ngModel)]="intern.start_date" #startDate="ngModel" required />
        <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
        <mat-datepicker #pickerStart></mat-datepicker>
        <div *ngIf="startDate.invalid && startDate.touched" class="error-msg">BaÅŸlangÄ±Ã§ tarihi zorunludur.</div>
      </mat-form-field>

      <mat-form-field appearance="fill" floatLabel="always" class="date-field">
        <label class="field-label">BitiÅŸ Tarihi</label>
        <input matInput [matDatepicker]="pickerEnd" name="endDate" [(ngModel)]="intern.end_date" />
        <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
        <mat-datepicker #pickerEnd></mat-datepicker>
      </mat-form-field>
    </div>


<div class="form-group">
  <label class="field-label">FotoÄŸraf YÃ¼kle</label>

  <div class="file-select-wrapper">
    <button mat-raised-button color="accent" type="button" (click)="openPhotoWithTauri()">
      FotoÄŸraf SeÃ§
    </button>

    <span *ngIf="intern.photoFile" class="file-badge" [title]="intern.photoFile.name">
      {{ intern.photoFile.name }}
    </span>

    <button
      *ngIf="intern.photoFile"
      type="button"
      class="btn-clear"
      aria-label="FotoÄŸrafÄ± kaldÄ±r"
      (click)="clearPhoto()"
    >
      Ã—
    </button>
  </div>

  <div class="photo-preview" *ngIf="photoPreviewUrl">
    <img [src]="photoPreviewUrl" alt="FotoÄŸraf Ã¶nizleme" />
  </div>
</div> 

<div class="form-group">
  <label class="field-label">CV YÃ¼kle (PDF, DOC, DOCX)</label>

  <div class="file-select-wrapper">
    <button mat-raised-button color="accent" type="button" (click)="openCvWithTauri()">
      CV SeÃ§
    </button>

    <span *ngIf="intern.cvFile" class="file-badge" [title]="selectedCvLabel">
      ðŸ“„ {{ selectedCvLabel }}
    </span>

    <button
      *ngIf="intern.cvFile"
      type="button"
      class="btn-clear"
      aria-label="CVâ€™yi kaldÄ±r"
      (click)="clearCv()"
    >
      Ã—
    </button>
  </div>
</div> 



    <div class="button-group">
      <button mat-raised-button color="primary" type="button" (click)="onSubmitClick()">Ekle</button>
    </div>
  </form>
</div>
